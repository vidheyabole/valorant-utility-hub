<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile - Valorant Utility Hub</title>
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/profile.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="container">
        <h1 class="logo">VALORANT UTILITY HUB</h1>
        <ul class="nav-links">
          <li><a href="/">Home</a></li>
          <li><a href="/lineups.html">Lineups</a></li>
          <li><a href="/crosshairs.html">Crosshairs</a></li>
          <li><a href="/profile.html" class="active">Profile</a></li>
          <li><a href="#" id="logoutLink">Logout</a></li>
        </ul>
      </div>
    </nav>

    <main class="container">
      <div class="profile-header">
        <h1>My Profile</h1>
      </div>

      <div class="profile-grid">
        <div class="profile-card">
          <div class="profile-avatar-container">
            <div class="profile-avatar">
              <img id="profilePicture" src="https://via.placeholder.com/150/0f1923/ffffff?text=?" alt="Profile" />
            </div>
            <div class="rank-overlay" id="rankOverlay">
              <img id="rankBadge" src="" alt="" style="display: none;" />
            </div>
          </div>
          
          <h2 id="displayUsername">Loading...</h2>
          <p id="displayEmail" class="email-text"></p>
          
          <div class="rank-badge" id="displayRankBadge">
            <span id="displayRank">Unranked</span>
          </div>
          
          <div class="favorite-agent" id="displayFavoriteAgent"></div>
          <p id="displayBio" class="bio-text"></p>
        </div>

        <div class="profile-stats-card">
          <h3>Your Statistics</h3>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-value" id="userLineups">0</div>
              <div class="stat-label">Lineups Created</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="userCrosshairs">0</div>
              <div class="stat-label">Crosshairs Created</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="totalContributions">0</div>
              <div class="stat-label">Total Contributions</div>
            </div>
          </div>

          <div class="profile-actions">
            <button class="btn btn-primary" id="editProfileBtn">Edit Profile</button>
            <button class="btn btn-secondary" id="viewMyLineupsBtn">View My Lineups</button>
            <button class="btn btn-secondary" id="viewMyCrosshairsBtn">View My Crosshairs</button>
          </div>
        </div>
      </div>
    </main>

    <div id="editProfileModal" class="modal">
      <div class="modal-content modal-large">
        <span class="close">&times;</span>
        <h2>Edit Profile</h2>
        <form id="editProfileForm">
          <div class="form-group">
            <label for="editUsername">Username</label>
            <input type="text" id="editUsername" required />
          </div>

          <div class="form-group">
            <label>Profile Picture</label>
            <div class="picture-option-buttons">
              <button type="button" class="option-btn active" id="selectAgentBtn">
                Choose Agent Icon
              </button>
              <button type="button" class="option-btn" id="uploadCustomBtn">
                Upload Custom Image
              </button>
            </div>
          </div>

          <div class="form-group" id="agentSelectionSection">
            <label>Select Your Agent</label>
            <div class="agent-grid" id="agentGrid">
              <div class="agent-option" data-agent="astra">
                <img src="/images/agents/astra.png" alt="Astra" onerror="this.src='https://via.placeholder.com/80/0f1923/a855f7?text=Astra'" />
                <span>Astra</span>
              </div>
              <div class="agent-option" data-agent="breach">
                <img src="/images/agents/breach.png" alt="Breach" onerror="this.src='https://via.placeholder.com/80/0f1923/ff4655?text=Breach'" />
                <span>Breach</span>
              </div>
              <div class="agent-option" data-agent="brimstone">
                <img src="/images/agents/brimstone.png" alt="Brimstone" onerror="this.src='https://via.placeholder.com/80/0f1923/ff4655?text=Brim'" />
                <span>Brimstone</span>
              </div>
              <div class="agent-option" data-agent="chamber">
                <img src="/images/agents/chamber.png" alt="Chamber" onerror="this.src='https://via.placeholder.com/80/0f1923/ffd966?text=Cham'" />
                <span>Chamber</span>
              </div>
              <div class="agent-option" data-agent="clove">
                <img src="/images/agents/clove.png" alt="Clove" onerror="this.src='https://via.placeholder.com/80/0f1923/ff69b4?text=Clove'" />
                <span>Clove</span>
              </div>
              <div class="agent-option" data-agent="cypher">
                <img src="/images/agents/cypher.png" alt="Cypher" onerror="this.src='https://via.placeholder.com/80/0f1923/ffd966?text=Cyph'" />
                <span>Cypher</span>
              </div>
              <div class="agent-option" data-agent="deadlock">
                <img src="/images/agents/deadlock.png" alt="Deadlock" onerror="this.src='https://via.placeholder.com/80/0f1923/ffffff?text=Dead'" />
                <span>Deadlock</span>
              </div>
              <div class="agent-option" data-agent="fade">
                <img src="/images/agents/fade.png" alt="Fade" onerror="this.src='https://via.placeholder.com/80/0f1923/00d1ff?text=Fade'" />
                <span>Fade</span>
              </div>
              <div class="agent-option" data-agent="gekko">
                <img src="/images/agents/gekko.png" alt="Gekko" onerror="this.src='https://via.placeholder.com/80/0f1923/00ff88?text=Gekko'" />
                <span>Gekko</span>
              </div>
              <div class="agent-option" data-agent="harbor">
                <img src="/images/agents/harbor.png" alt="Harbor" onerror="this.src='https://via.placeholder.com/80/0f1923/00d1ff?text=Harbor'" />
                <span>Harbor</span>
              </div>
              <div class="agent-option" data-agent="iso">
                <img src="/images/agents/iso.png" alt="Iso" onerror="this.src='https://via.placeholder.com/80/0f1923/a855f7?text=Iso'" />
                <span>Iso</span>
              </div>
              <div class="agent-option" data-agent="jett">
                <img src="/images/agents/jett.png" alt="Jett" onerror="this.src='https://via.placeholder.com/80/0f1923/00d1ff?text=Jett'" />
                <span>Jett</span>
              </div>
              <div class="agent-option" data-agent="kayo">
                <img src="/images/agents/kayo.png" alt="KAY/O" onerror="this.src='https://via.placeholder.com/80/0f1923/ffd966?text=KAYO'" />
                <span>KAY/O</span>
              </div>
              <div class="agent-option" data-agent="killjoy">
                <img src="/images/agents/killjoy.png" alt="Killjoy" onerror="this.src='https://via.placeholder.com/80/0f1923/ffd966?text=KJ'" />
                <span>Killjoy</span>
              </div>
              <div class="agent-option" data-agent="neon">
                <img src="/images/agents/neon.png" alt="Neon" onerror="this.src='https://via.placeholder.com/80/0f1923/00d1ff?text=Neon'" />
                <span>Neon</span>
              </div>
              <div class="agent-option" data-agent="omen">
                <img src="/images/agents/omen.png" alt="Omen" onerror="this.src='https://via.placeholder.com/80/0f1923/a855f7?text=Omen'" />
                <span>Omen</span>
              </div>
              <div class="agent-option" data-agent="phoenix">
                <img src="/images/agents/phoenix.png" alt="Phoenix" onerror="this.src='https://via.placeholder.com/80/0f1923/ff4655?text=Phx'" />
                <span>Phoenix</span>
              </div>
              <div class="agent-option" data-agent="raze">
                <img src="/images/agents/raze.png" alt="Raze" onerror="this.src='https://via.placeholder.com/80/0f1923/ff4655?text=Raze'" />
                <span>Raze</span>
              </div>
              <div class="agent-option" data-agent="reyna">
                <img src="/images/agents/reyna.png" alt="Reyna" onerror="this.src='https://via.placeholder.com/80/0f1923/ff69b4?text=Reyna'" />
                <span>Reyna</span>
              </div>
              <div class="agent-option" data-agent="sage">
                <img src="/images/agents/sage.png" alt="Sage" onerror="this.src='https://via.placeholder.com/80/0f1923/00ff88?text=Sage'" />
                <span>Sage</span>
              </div>
              <div class="agent-option" data-agent="skye">
                <img src="/images/agents/skye.png" alt="Skye" onerror="this.src='https://via.placeholder.com/80/0f1923/00ff88?text=Skye'" />
                <span>Skye</span>
              </div>
              <div class="agent-option" data-agent="sova">
                <img src="/images/agents/sova.png" alt="Sova" onerror="this.src='https://via.placeholder.com/80/0f1923/00d1ff?text=Sova'" />
                <span>Sova</span>
              </div>
              <div class="agent-option" data-agent="tejo">
                <img src="/images/agents/tejo.png" alt="Tejo" onerror="this.src='https://via.placeholder.com/80/0f1923/ff4655?text=Tejo'" />
                <span>Tejo</span>
              </div>
              <div class="agent-option" data-agent="veto">
                <img src="/images/agents/veto.png" alt="Veto" onerror="this.src='https://via.placeholder.com/80/0f1923/00ff88?text=Veto'" />
                <span>Veto</span>
              </div>
              <div class="agent-option" data-agent="viper">
                <img src="/images/agents/viper.png" alt="Viper" onerror="this.src='https://via.placeholder.com/80/0f1923/00ff88?text=Viper'" />
                <span>Viper</span>
              </div>
              <div class="agent-option" data-agent="vyse">
                <img src="/images/agents/vyse.png" alt="Vyse" onerror="this.src='https://via.placeholder.com/80/0f1923/a855f7?text=Vyse'" />
                <span>Vyse</span>
              </div>
              <div class="agent-option" data-agent="waylay">
                <img src="/images/agents/waylay.png" alt="Waylay" onerror="this.src='https://via.placeholder.com/80/0f1923/ffd966?text=Way'" />
                <span>Waylay</span>
              </div>
              <div class="agent-option" data-agent="yoru">
                <img src="/images/agents/yoru.png" alt="Yoru" onerror="this.src='https://via.placeholder.com/80/0f1923/3b82f6?text=Yoru'" />
                <span>Yoru</span>
              </div>
            </div>
          </div>

          <div class="form-group" id="customUploadSection" style="display: none;">
            <label for="editProfilePicture">Upload Custom Image</label>
            <input type="file" id="editProfilePicture" accept="image/*" />
            <div id="profilePicturePreview" class="image-preview"></div>
          </div>

          <div class="form-group">
            <label for="editBio">Bio</label>
            <textarea id="editBio" rows="3" placeholder="Tell us about yourself..."></textarea>
          </div>

          <div class="form-group">
            <label for="editRank">Valorant Rank</label>
            <select id="editRank">
              <option value="Unranked">Unranked</option>
              <option value="Iron">Iron</option>
              <option value="Bronze">Bronze</option>
              <option value="Silver">Silver</option>
              <option value="Gold">Gold</option>
              <option value="Platinum">Platinum</option>
              <option value="Diamond">Diamond</option>
              <option value="Ascendant">Ascendant</option>
              <option value="Immortal">Immortal</option>
              <option value="Radiant">Radiant</option>
            </select>
            <small style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
              Rank badge will be automatically assigned
            </small>
          </div>

          <div class="form-group">
            <label for="editFavoriteAgent">Favorite Agent</label>
            <select id="editFavoriteAgent">
              <option value="">Select Agent</option>
              <option value="Astra">Astra</option>
              <option value="Breach">Breach</option>
              <option value="Brimstone">Brimstone</option>
              <option value="Chamber">Chamber</option>
              <option value="Clove">Clove</option>
              <option value="Cypher">Cypher</option>
              <option value="Deadlock">Deadlock</option>
              <option value="Fade">Fade</option>
              <option value="Gekko">Gekko</option>
              <option value="Harbor">Harbor</option>
              <option value="Iso">Iso</option>
              <option value="Jett">Jett</option>
              <option value="KAY/O">KAY/O</option>
              <option value="Killjoy">Killjoy</option>
              <option value="Neon">Neon</option>
              <option value="Omen">Omen</option>
              <option value="Phoenix">Phoenix</option>
              <option value="Raze">Raze</option>
              <option value="Reyna">Reyna</option>
              <option value="Sage">Sage</option>
              <option value="Skye">Skye</option>
              <option value="Sova">Sova</option>
              <option value="Tejo">Tejo</option>
              <option value="Veto">Veto</option>
              <option value="Viper">Viper</option>
              <option value="Vyse">Vyse</option>
              <option value="Waylay">Waylay</option>
              <option value="Yoru">Yoru</option>
            </select>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Changes</button>
          </div>
        </form>
      </div>
    </div>

    <script type="module">
      window.auth = {
        isLoggedIn: () => localStorage.getItem('user') !== null,
        getCurrentUser: () => {
          const userStr = localStorage.getItem('user');
          return userStr ? JSON.parse(userStr) : null;
        },
        saveUser: (user) => localStorage.setItem('user', JSON.stringify(user)),
        clearUser: () => localStorage.removeItem('user')
      };
    </script>
    <script type="module" src="/js/profile.js"></script>
  </body>
</html>